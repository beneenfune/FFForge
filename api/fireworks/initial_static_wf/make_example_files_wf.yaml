fws:
- fw_id: 1
  name: Fetch lattices and energies
  spec:
    _tasks:
    - _fw_name: ForeachTask
      split: finished jobs ids
      task:
        _fw_name: ScriptTask
        # TODO: fetch the lattice and energy per job output
        # func: auxiliary.printurn
        # inputs: [finished jobs ids]
        # outputs: [lattices and energies]
    finished jobs ids: [ 1234 ] # TODO: find in the outputs collection for testing
- fw_id: 2
  name: Write example files
  spec:
    _tasks:
    - _fw_name: ForeachTask
      split: lattices and energies
      task:
        _fw_name: TemplateWriterTask
        template_file: simple_example_template.example # TODO: make an *.example template for FireWorks to use as a copy
        context: 
          energy: 
          matrix_0_0: 
          matrix_0_1: 
          ... # TODO: develop schema for the list lattice and energies, maybe instead of a dictionary you can pass the literal values as a list? doesnt solve the problem of how to reference elements inside split
        output_file: # TODO: is there a way to name the file using the job id if we pass it in lattices and energies
        # inputs: [lattices and energies]
        # outputs: [example files]
- fw_id: 3
  name: Transfer example files to directory
  spec:
    _tasks:
    - _fw_name: ForeachTask
      split: example files
      task:
        _fw_name: FileTransferTask
        func: auxiliary.printurn # TODO: based on FileTransferTask
        inputs: [example files]
        outputs:  # TODO: based on FileTransferTask
- fw_id: 4
  name: Zip example files
  spec:
    _tasks:
    - _fw_name: PyTask
      func: shutil.make_archive
      inputs: [directory_to_zip, output_path, ...] # TODO: see documentation https://docs.python.org/3/library/shutil.html
      outputs: zip_path # TODO: based on PyTask
    directory_to_zip: # TODO: find location on Perlmutter
    output_path: # TODO: find location on Perlmutter
    ...
links:
  '1': [2]
  '2': [3]
  '3': [4]
metadata: {}
name: Workflow to generate example files for PANNA